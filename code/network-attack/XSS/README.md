# XSS

XSS即cross site script，中译跨站脚本攻击。（由于CSS与层叠样式表重名，故改为XSS）

XSS的本质就是在页面上执行攻击的脚本，获取用户的Cookie等隐私信息。

## 分类

XSS攻击主要分为3种：
1. 存储型XSS

存储型XSS将恶意脚本或代码发送到服务器，然后被存储到服务器的数据库中，当用户请求数据时被返回执行，从而获取隐私信息。

2. 反射型XSS

反射型XSS也将恶意代码或脚本通过请求发送给服务器，但是服务器
并不存储该脚本或代码，而是对请求参数或负载处理后返回给客户端，如果参数或负载中包含恶意代码且被返回，那么恶意代码或脚本将可能在客户端执行，从而获取用户信息。

3. 基于DOM的XSS

基于DOM的XSS并不涉及Web服务器，而是通过网络劫持在页面传输过程中修改HTML内容。

## 防御

1. 过滤

对客户端请求参数或负载进行关键词等信息的过滤，或者对内容进行转码处理等。

2. 使用CSP

过滤是服务端的保障，而CSP则是在浏览器端进行的保障。

主要做法是服务器返回响应设置header: `Content-Security-Policy: policy`从而在浏览器端开启CSP。

CSP主要有以下几个功能：

a. 限制加载其他域下的脚本，这样就算内嵌了javascript脚本也不会加载

b. 禁止向第三方域提交数据

c. 禁止执行内联脚本或未授权的脚本

d. 提供上报机制，帮助我们修复XSS攻击漏洞


3. 使用HttpOnly属性

这种防御手段是针对XSS主要盗取用户Cookie的特性。服务器可以在响应中为cookie设置HttpOnly,这样js就无法读取该cookie。

